<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>phpserialize-rs - High-Performance PHP Deserializer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --text-muted: #6e7681;
            --accent: #58a6ff;
            --accent-hover: #79b8ff;
            --accent-green: #3fb950;
            --accent-orange: #d29922;
            --accent-purple: #a371f7;
            --accent-red: #f85149;
            --border: #30363d;
            --border-light: #21262d;
            --code-bg: #161b22;
            --sidebar-width: 280px;
            --header-height: 60px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: calc(var(--header-height) + 20px);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
        }

        a {
            color: var(--accent);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        code {
            font-family: 'SF Mono', 'Fira Code', Consolas, monospace;
            font-size: 0.9em;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            display: flex;
            align-items: center;
        }

        .header-container {
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .header-nav {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-nav a {
            padding: 8px 16px;
            border-radius: 6px;
            color: var(--text-secondary);
            font-size: 14px;
            transition: all 0.2s;
        }

        .header-nav a:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-decoration: none;
        }

        .header-nav a.active {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .github-link {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: var(--bg-tertiary);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .github-link:hover {
            background: var(--border);
            text-decoration: none;
        }

        /* Layout */
        .layout {
            display: flex;
            margin-top: var(--header-height);
            min-height: calc(100vh - var(--header-height));
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: var(--header-height);
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - var(--header-height));
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            overflow-y: auto;
            padding: 24px 0;
        }

        .sidebar-section {
            margin-bottom: 24px;
        }

        .sidebar-title {
            padding: 0 24px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav a {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 24px;
            color: var(--text-secondary);
            font-size: 14px;
            border-left: 2px solid transparent;
            transition: all 0.15s;
        }

        .sidebar-nav a:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-decoration: none;
        }

        .sidebar-nav a.active {
            background: rgba(88, 166, 255, 0.1);
            color: var(--accent);
            border-left-color: var(--accent);
        }

        .sidebar-nav .icon {
            width: 16px;
            text-align: center;
            font-size: 12px;
        }

        /* Main Content */
        .main {
            flex: 1;
            margin-left: var(--sidebar-width);
            max-width: calc(100% - var(--sidebar-width));
        }

        .content {
            max-width: 900px;
            margin: 0 auto;
            padding: 48px 48px 100px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 0 80px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 60px;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 14px;
            background: rgba(63, 185, 80, 0.15);
            border: 1px solid rgba(63, 185, 80, 0.4);
            border-radius: 20px;
            font-size: 13px;
            color: var(--accent-green);
            margin-bottom: 24px;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 32px;
        }

        .hero-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            border: none;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            text-decoration: none;
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--border);
            text-decoration: none;
        }

        /* Feature Cards */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 48px 0;
        }

        .feature-card {
            padding: 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            transition: all 0.2s;
        }

        .feature-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: rgba(88, 166, 255, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            font-size: 18px;
            color: var(--accent);
        }

        .feature-card h3 {
            font-size: 1rem;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .feature-card p {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Sections */
        .section {
            margin-bottom: 64px;
        }

        .section h2 {
            font-size: 1.75rem;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section h2 .anchor {
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .section h2:hover .anchor {
            opacity: 1;
        }

        .section h3 {
            font-size: 1.25rem;
            margin: 32px 0 16px;
            color: var(--text-primary);
        }

        .section p {
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        /* Code Blocks */
        .code-block {
            position: relative;
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 16px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border);
        }

        .code-lang {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .copy-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: var(--border);
            color: var(--text-primary);
        }

        .copy-btn.copied {
            color: var(--accent-green);
            border-color: var(--accent-green);
        }

        .code-block pre {
            margin: 0;
            padding: 16px;
            background: var(--code-bg);
            overflow-x: auto;
        }

        .code-block code {
            font-size: 14px;
            line-height: 1.6;
        }

        /* Inline Code */
        :not(pre) > code {
            padding: 2px 6px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            font-size: 0.85em;
        }

        /* Tabs */
        .tabs {
            margin: 20px 0;
        }

        .tab-buttons {
            display: flex;
            gap: 4px;
            padding: 4px;
            background: var(--bg-secondary);
            border-radius: 8px;
            width: fit-content;
            margin-bottom: 16px;
        }

        .tab-btn {
            padding: 8px 16px;
            background: transparent;
            border: none;
            border-radius: 6px;
            color: var(--text-secondary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            color: var(--text-primary);
        }

        .tab-btn.active {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--bg-secondary);
            font-weight: 600;
            color: var(--text-primary);
        }

        td {
            color: var(--text-secondary);
        }

        td code {
            color: var(--accent);
        }

        /* Callouts */
        .callout {
            padding: 16px 20px;
            border-radius: 8px;
            margin: 20px 0;
            display: flex;
            gap: 12px;
        }

        .callout-icon {
            flex-shrink: 0;
            font-size: 18px;
        }

        .callout-content {
            flex: 1;
        }

        .callout-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .callout-info {
            background: rgba(88, 166, 255, 0.1);
            border: 1px solid rgba(88, 166, 255, 0.3);
        }

        .callout-info .callout-icon { color: var(--accent); }

        .callout-warning {
            background: rgba(210, 153, 34, 0.1);
            border: 1px solid rgba(210, 153, 34, 0.3);
        }

        .callout-warning .callout-icon { color: var(--accent-orange); }

        .callout-success {
            background: rgba(63, 185, 80, 0.1);
            border: 1px solid rgba(63, 185, 80, 0.3);
        }

        .callout-success .callout-icon { color: var(--accent-green); }

        /* Performance Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
            margin: 32px 0;
        }

        .stat-card {
            padding: 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            line-height: 1;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        /* Version Badge */
        .version-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Footer */
        footer {
            margin-left: var(--sidebar-width);
            padding: 40px 48px;
            border-top: 1px solid var(--border);
            background: var(--bg-secondary);
        }

        .footer-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .footer-links {
            display: flex;
            gap: 24px;
        }

        .footer-links a {
            color: var(--text-secondary);
        }

        .footer-links a:hover {
            color: var(--accent);
        }

        /* Mobile */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }

            .main {
                margin-left: 0;
                max-width: 100%;
            }

            .content {
                padding: 24px 20px 60px;
            }

            footer {
                margin-left: 0;
                padding: 24px 20px;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .features {
                grid-template-columns: 1fr;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">P</div>
                phpserialize-rs
            </a>
            <nav class="header-nav">
                <a href="index.html" class="active">Docs</a>
                <a href="api.html">API Reference</a>
                <a href="examples.html">Examples</a>
                <a href="https://github.com/sokojh/phpserialize-rs" class="github-link">
                    <i class="fab fa-github"></i>
                    GitHub
                </a>
            </nav>
        </div>
    </header>

    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Getting Started</div>
                <ul class="sidebar-nav">
                    <li><a href="#introduction" class="active"><span class="icon"><i class="fas fa-home"></i></span> Introduction</a></li>
                    <li><a href="#installation"><span class="icon"><i class="fas fa-download"></i></span> Installation</a></li>
                    <li><a href="#quick-start"><span class="icon"><i class="fas fa-bolt"></i></span> Quick Start</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Guide</div>
                <ul class="sidebar-nav">
                    <li><a href="#basic-usage"><span class="icon"><i class="fas fa-code"></i></span> Basic Usage</a></li>
                    <li><a href="#php-types"><span class="icon"><i class="fas fa-cubes"></i></span> PHP Types</a></li>
                    <li><a href="#error-handling"><span class="icon"><i class="fas fa-exclamation-triangle"></i></span> Error Handling</a></li>
                    <li><a href="#db-escaping"><span class="icon"><i class="fas fa-database"></i></span> DB Escaping</a></li>
                    <li><a href="#pyspark"><span class="icon"><i class="fas fa-fire"></i></span> PySpark Integration</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Reference</div>
                <ul class="sidebar-nav">
                    <li><a href="api.html"><span class="icon"><i class="fas fa-book"></i></span> API Reference</a></li>
                    <li><a href="#performance"><span class="icon"><i class="fas fa-tachometer-alt"></i></span> Performance</a></li>
                    <li><a href="#compatibility"><span class="icon"><i class="fas fa-check-circle"></i></span> Compatibility</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Resources</div>
                <ul class="sidebar-nav">
                    <li><a href="https://github.com/sokojh/phpserialize-rs"><span class="icon"><i class="fab fa-github"></i></span> GitHub</a></li>
                    <li><a href="https://pypi.org/project/phpserialize-rs/"><span class="icon"><i class="fab fa-python"></i></span> PyPI</a></li>
                    <li><a href="https://crates.io/crates/php-deserialize-core"><span class="icon"><i class="fas fa-cube"></i></span> crates.io</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <div class="content">
                <!-- Hero -->
                <section class="hero">
                    <div class="hero-badge">
                        <i class="fas fa-rocket"></i>
                        High Performance PHP Parser
                    </div>
                    <h1>phpserialize-rs</h1>
                    <p class="hero-subtitle">
                        A blazingly fast PHP serialize/unserialize parser written in Rust with Python bindings.
                        Zero-copy parsing, full type support, and seamless PySpark integration.
                    </p>
                    <div class="hero-buttons">
                        <a href="#installation" class="btn btn-primary">
                            <i class="fas fa-download"></i>
                            Get Started
                        </a>
                        <a href="https://github.com/sokojh/phpserialize-rs" class="btn btn-secondary">
                            <i class="fab fa-github"></i>
                            View on GitHub
                        </a>
                    </div>
                </section>

                <!-- Features -->
                <div class="features">
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-bolt"></i></div>
                        <h3>Blazingly Fast</h3>
                        <p>Zero-copy parsing with SIMD-accelerated byte search. 10x faster than pure Python implementations.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                        <h3>Type Safe</h3>
                        <p>Full PHP type support including objects, enums (PHP 8.1+), and circular references.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-globe"></i></div>
                        <h3>Unicode Ready</h3>
                        <p>Native UTF-8 support for Korean, Japanese, Chinese, and emoji strings.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-database"></i></div>
                        <h3>DB Escape Aware</h3>
                        <p>Auto-detects and handles double-quoted strings from database exports.</p>
                    </div>
                </div>

                <!-- Introduction -->
                <section id="introduction" class="section">
                    <h2>
                        Introduction
                        <a href="#introduction" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>
                    <p>
                        <strong>phpserialize-rs</strong> is a high-performance library for parsing PHP's serialize format,
                        written in Rust with first-class Python bindings. It's designed for production use cases where
                        you need to process large amounts of PHP serialized data efficiently.
                    </p>

                    <div class="callout callout-info">
                        <div class="callout-icon"><i class="fas fa-info-circle"></i></div>
                        <div class="callout-content">
                            <div class="callout-title">Why another PHP serializer?</div>
                            <p>Existing Python libraries like <code>php2json</code> often fail on edge cases like Korean text or DB-escaped strings. This library handles all those cases correctly while being significantly faster.</p>
                        </div>
                    </div>
                </section>

                <!-- Installation -->
                <section id="installation" class="section">
                    <h2>
                        Installation
                        <a href="#installation" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <div class="tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="python">Python</button>
                            <button class="tab-btn" data-tab="rust">Rust</button>
                        </div>

                        <div id="python" class="tab-content active">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">bash</span>
                                    <button class="copy-btn" onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                                <pre><code class="language-bash">pip install phpserialize-rs</code></pre>
                            </div>

                            <h3>Requirements</h3>
                            <ul>
                                <li>Python 3.8 - 3.13</li>
                                <li>Linux, macOS, or Windows</li>
                            </ul>
                        </div>

                        <div id="rust" class="tab-content">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">toml</span>
                                    <button class="copy-btn" onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                                <pre><code class="language-toml">[dependencies]
php-deserialize-core = "0.1"

# Optional: JSON conversion
php-deserialize-core = { version = "0.1", features = ["serde"] }

# Optional: Tracing support
php-deserialize-core = { version = "0.1", features = ["tracing"] }</code></pre>
                            </div>

                            <h3>Requirements</h3>
                            <ul>
                                <li>Rust 1.70 or later</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Quick Start -->
                <section id="quick-start" class="section">
                    <h2>
                        Quick Start
                        <a href="#quick-start" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <div class="tabs">
                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="qs-python">Python</button>
                            <button class="tab-btn" data-tab="qs-rust">Rust</button>
                        </div>

                        <div id="qs-python" class="tab-content active">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">python</span>
                                    <button class="copy-btn" onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                                <pre><code class="language-python">from php_deserialize import loads, loads_json

# Parse PHP serialized data
data = b'a:2:{s:4:"name";s:5:"Alice";s:3:"age";i:30;}'
result = loads(data)
print(result)  # {'name': 'Alice', 'age': 30}

# Direct JSON output (faster for large data)
json_str = loads_json(data)
print(json_str)  # {"name":"Alice","age":30}

# Korean text support
korean = b's:6:"\xed\x95\x9c\xea\xb8\x80";'
print(loads(korean))  # "한글"</code></pre>
                            </div>
                        </div>

                        <div id="qs-rust" class="tab-content">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">rust</span>
                                    <button class="copy-btn" onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i> Copy
                                    </button>
                                </div>
                                <pre><code class="language-rust">use php_deserialize_core::{from_bytes, PhpValue};

fn main() {
    let data = br#"a:2:{s:4:"name";s:5:"Alice";s:3:"age";i:30;}"#;
    let value = from_bytes(data).unwrap();

    if let PhpValue::Array(items) = value {
        for (key, val) in items {
            println!("{} => {}", key, val);
        }
    }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Basic Usage -->
                <section id="basic-usage" class="section">
                    <h2>
                        Basic Usage
                        <a href="#basic-usage" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <h3>Parsing Data</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">python</span>
                            <button class="copy-btn" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <pre><code class="language-python">from php_deserialize import loads

# Simple types
loads(b'N;')           # None
loads(b'b:1;')         # True
loads(b'i:42;')        # 42
loads(b'd:3.14;')      # 3.14
loads(b's:5:"hello";') # "hello"

# Arrays
loads(b'a:2:{i:0;s:1:"a";i:1;s:1:"b";}')  # ["a", "b"]
loads(b'a:1:{s:3:"key";s:5:"value";}')    # {"key": "value"}

# Objects
data = b'O:8:"stdClass":1:{s:4:"name";s:5:"Alice";}'
loads(data)  # {"__class__": "stdClass", "name": "Alice"}</code></pre>
                    </div>
                </section>

                <!-- PHP Types -->
                <section id="php-types" class="section">
                    <h2>
                        PHP Types
                        <a href="#php-types" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <table>
                        <thead>
                            <tr>
                                <th>PHP Type</th>
                                <th>Format</th>
                                <th>Python Type</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>null</code></td>
                                <td><code>N;</code></td>
                                <td><code>None</code></td>
                                <td><code>N;</code></td>
                            </tr>
                            <tr>
                                <td><code>bool</code></td>
                                <td><code>b:0|1;</code></td>
                                <td><code>bool</code></td>
                                <td><code>b:1;</code></td>
                            </tr>
                            <tr>
                                <td><code>int</code></td>
                                <td><code>i:&lt;value&gt;;</code></td>
                                <td><code>int</code></td>
                                <td><code>i:42;</code></td>
                            </tr>
                            <tr>
                                <td><code>float</code></td>
                                <td><code>d:&lt;value&gt;;</code></td>
                                <td><code>float</code></td>
                                <td><code>d:3.14;</code></td>
                            </tr>
                            <tr>
                                <td><code>string</code></td>
                                <td><code>s:&lt;len&gt;:"&lt;data&gt;";</code></td>
                                <td><code>str</code></td>
                                <td><code>s:5:"hello";</code></td>
                            </tr>
                            <tr>
                                <td><code>array</code></td>
                                <td><code>a:&lt;count&gt;:{...}</code></td>
                                <td><code>list</code> / <code>dict</code></td>
                                <td><code>a:1:{i:0;N;}</code></td>
                            </tr>
                            <tr>
                                <td><code>object</code></td>
                                <td><code>O:&lt;len&gt;:"&lt;class&gt;":...</code></td>
                                <td><code>dict</code></td>
                                <td><code>O:8:"stdClass":0:{}</code></td>
                            </tr>
                            <tr>
                                <td><code>enum</code></td>
                                <td><code>E:&lt;len&gt;:"Class:Case";</code></td>
                                <td><code>str</code></td>
                                <td><code>E:13:"Status:Active";</code></td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- Error Handling -->
                <section id="error-handling" class="section">
                    <h2>
                        Error Handling
                        <a href="#error-handling" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">python</span>
                            <button class="copy-btn" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <pre><code class="language-python">from php_deserialize import loads, PhpDeserializeError

try:
    result = loads(b'invalid data')
except PhpDeserializeError as e:
    print(f"Parse error: {e}")

# Error handling modes for invalid UTF-8
loads(data, errors="strict")   # Raise error (default)
loads(data, errors="replace")  # Replace with U+FFFD
loads(data, errors="bytes")    # Return as bytes</code></pre>
                    </div>

                    <div class="callout callout-warning">
                        <div class="callout-icon"><i class="fas fa-exclamation-triangle"></i></div>
                        <div class="callout-content">
                            <div class="callout-title">Maximum Depth Limit</div>
                            <p>The parser has a default maximum depth of 512 to prevent stack overflow attacks. Deeply nested structures beyond this limit will raise an error.</p>
                        </div>
                    </div>
                </section>

                <!-- DB Escaping -->
                <section id="db-escaping" class="section">
                    <h2>
                        DB Escaping
                        <a href="#db-escaping" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <p>
                        Data exported from databases often has double-quoted strings that break regular parsers.
                        phpserialize-rs automatically detects and handles this:
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">python</span>
                            <button class="copy-btn" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <pre><code class="language-python">from php_deserialize import loads

# DB-escaped format (double quotes)
db_data = b'"a:1:{s:3:""key"";s:5:""value"";}"'

# Automatically handled!
result = loads(db_data)
print(result)  # {'key': 'value'}

# Disable auto-unescape if needed
result = loads(data, auto_unescape=False)</code></pre>
                    </div>
                </section>

                <!-- PySpark Integration -->
                <section id="pyspark" class="section">
                    <h2>
                        PySpark Integration
                        <a href="#pyspark" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <p>Built-in UDF helpers for seamless DataFrame integration:</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">python</span>
                            <button class="copy-btn" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <pre><code class="language-python">from php_deserialize.spark import php_deserialize_udf

# Create UDF that returns JSON strings
deserialize = php_deserialize_udf("json")

# Use in DataFrame
df = df.withColumn("parsed_data", deserialize("php_column"))

# Parse the JSON column
from pyspark.sql.functions import from_json, schema_of_json
schema = schema_of_json(df.select("parsed_data").first()[0])
df = df.withColumn("data", from_json("parsed_data", schema))</code></pre>
                    </div>

                    <div class="callout callout-success">
                        <div class="callout-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="callout-content">
                            <div class="callout-title">Databricks Compatible</div>
                            <p>Tested and optimized for Databricks environments. Works seamlessly with Delta Lake tables containing PHP serialized data.</p>
                        </div>
                    </div>
                </section>

                <!-- Performance -->
                <section id="performance" class="section">
                    <h2>
                        Performance
                        <a href="#performance" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-value">1+ GB/s</div>
                            <div class="stat-label">Parse Throughput</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">10x</div>
                            <div class="stat-label">Faster than php2json</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">Zero</div>
                            <div class="stat-label">Copy Parsing</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">&lt;10%</div>
                            <div class="stat-label">Python Overhead</div>
                        </div>
                    </div>

                    <h3>Optimization Techniques</h3>
                    <ul>
                        <li><strong>Zero-copy parsing</strong> - Borrows directly from input buffer when possible</li>
                        <li><strong>SIMD acceleration</strong> - Uses <code>memchr</code> for fast byte search</li>
                        <li><strong>Inline hot paths</strong> - Critical functions are marked for inlining</li>
                        <li><strong>Minimal allocations</strong> - Only allocates for owned data and collections</li>
                    </ul>
                </section>

                <!-- Compatibility -->
                <section id="compatibility" class="section">
                    <h2>
                        Compatibility
                        <a href="#compatibility" class="anchor"><i class="fas fa-link"></i></a>
                    </h2>

                    <h3>Python Versions</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Version</th>
                                <th>Linux</th>
                                <th>macOS</th>
                                <th>Windows</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Python 3.8</td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-minus" style="color: var(--text-muted)"></i></td></tr>
                            <tr><td>Python 3.9</td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td></tr>
                            <tr><td>Python 3.10</td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td></tr>
                            <tr><td>Python 3.11</td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td></tr>
                            <tr><td>Python 3.12</td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td></tr>
                            <tr><td>Python 3.13</td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-check" style="color: var(--accent-green)"></i></td><td><i class="fas fa-minus" style="color: var(--text-muted)"></i></td></tr>
                        </tbody>
                    </table>

                    <h3>Rust Version</h3>
                    <p>Minimum Supported Rust Version (MSRV): <code>1.70</code></p>

                    <h3>PHP Compatibility</h3>
                    <p>Supports data serialized by PHP 5.x through PHP 8.3, including:</p>
                    <ul>
                        <li>All basic types (null, bool, int, float, string)</li>
                        <li>Arrays (indexed and associative)</li>
                        <li>Objects with public/protected/private properties</li>
                        <li>PHP 8.1+ Enums</li>
                        <li>Circular references (R/r markers)</li>
                    </ul>
                </section>
            </div>

            <!-- Footer -->
            <footer>
                <div class="footer-content">
                    <div>
                        <span class="version-badge">
                            <i class="fas fa-tag"></i>
                            v0.1.0
                        </span>
                        &nbsp;&nbsp;MIT / Apache-2.0 License
                    </div>
                    <div class="footer-links">
                        <a href="https://github.com/sokojh/phpserialize-rs">GitHub</a>
                        <a href="https://github.com/sokojh/phpserialize-rs/issues">Issues</a>
                        <a href="https://github.com/sokojh/phpserialize-rs/blob/main/CONTRIBUTING.md">Contributing</a>
                    </div>
                </div>
            </footer>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/rust.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/toml.min.js"></script>
    <script>
        // Initialize syntax highlighting
        hljs.highlightAll();

        // Tab functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const tabGroup = btn.closest('.tabs');
                const tabId = btn.dataset.tab;

                // Update buttons
                tabGroup.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Update content
                tabGroup.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Copy code functionality
        function copyCode(btn) {
            const codeBlock = btn.closest('.code-block');
            const code = codeBlock.querySelector('code').textContent;

            navigator.clipboard.writeText(code).then(() => {
                btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                btn.classList.add('copied');

                setTimeout(() => {
                    btn.innerHTML = '<i class="fas fa-copy"></i> Copy';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        // Active sidebar link on scroll
        const sections = document.querySelectorAll('.section[id]');
        const navLinks = document.querySelectorAll('.sidebar-nav a[href^="#"]');

        window.addEventListener('scroll', () => {
            let current = '';

            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
</code></pre>
